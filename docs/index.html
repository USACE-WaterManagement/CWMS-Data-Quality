<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>CDA Github Docs</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/styles.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
            integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/js/all.min.js"
            integrity="sha512-2bMhOkE/ACz21dJT8zBOMgMecNxx0d37NND803ExktKiKdSzdwn+L7i9fdccw/3V06gM/DBWKbYmQvKMdAA9Nw=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="js/main.min.js" type="module" async defer></script>
    </head>

    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
            <div class="container-fluid">
                <a title="US Army Corps of Engineers Water Management System Data API" class="navbar-brand"
                    href="#">CWMS Quality Codes</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">Home</a>
                        </li>
                        <li class="nav-item">
                            <a title="Open CDA Wiki" class="nav-link" target="_blank"
                                href="https://github.com/USACE/cwms-radar-api/wiki">Wiki</a>
                        </li>
                        <li class="nav-item">
                            <a title="Open Github Page" class="nav-link" target="_blank"
                                href="https://github.com/krowvin/CWMS-Data-Quality">Github</a>
                        </li>
                        <li class="nav-item">
                            <a title="Open NPM Page" class="nav-link" target="_blank"
                                href="https://www.npmjs.com/package/cwms-data-quality">NPM</a>
                        </li>
                        <!-- <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Dropdown
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                                <li><a class="dropdown-item" href="#">Action</a></li>
                                <li><a class="dropdown-item" href="#">Another action</a></li>
                                <li>
                                    <hr class="dropdown-divider">
                                </li>
                                <li><a class="dropdown-item" href="#">Something else here</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link disabled">Disabled</a>
                        </li> -->
                    </ul>
                    <!-- <form class="d-flex">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                    </form> -->
                </div>
            </div>
        </nav>
        <main class="container-fluid p-2">
            <nav>
                <div class="nav nav-tabs h3" id="nav-tab" role="tablist">
                    <button class="nav-link ms-lg-5" id="nav-find-tab" data-bs-toggle="tab" data-bs-target="#nav-find"
                        type="button" role="tab" aria-controls="nav-find" aria-selected="false">Find</button>
                    <button class="nav-link" id="nav-create-tab" data-bs-toggle="tab" data-bs-target="#nav-create"
                        type="button" role="tab" aria-controls="nav-create" aria-selected="false">Create</button>
                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
                <div class="tab-pane fade" id="nav-find" role="tabpanel" aria-labelledby="nav-find-tab">
                    <div class="row m-3">
                        <div class="col"><label for="qualityCode" class="h4 me-2">Quality Code (int): </label><input
                                autocomplete="off" id="qualityCode" type="number" min="-2147483647" max="2147483649"
                                placeholder="Enter an integer value..." class="w-25">
                            <button id="checkCode" class="btn btn-primary"
                                title="Execute check against currently entered Quality Code">Check</button>
                            <button id="clearCode" class="btn btn-danger" title="Clear the Table"
                                style="margin-left: 10px;">Clear</button>
                        </div>
                        <div class="row">
                            <div class="table-responsive">
                                <table class="table caption-top" id="qualityTable">
                                    <caption>Add codes above with the input box/check button<br>Clear the table with the
                                        clear button</caption>
                                    <thead class="sticky-top">
                                        <tr>
                                            <th scope="col">QUALITY_CODE</th>
                                            <th scope="col">SCREENED_ID</th>
                                            <th scope="col">VALIDITY_ID</th>
                                            <th scope="col">RANGE_ID</th>
                                            <th scope="col">CHANGED_ID</th>
                                            <th scope="col">REPL_CAUSE_ID</th>
                                            <th scope="col">REPL_METHOD_ID</th>
                                            <th scope="col">PROTECTION_ID</th>
                                            <th scope="col">TEST_FAILED_ID</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade p-3" id="nav-create" role="tabpanel" aria-labelledby="nav-create-tab">
                    <div class="container">
                        
                        <div class="input-group mb-3 w-75">
                            <span class="input-group-text" id="inputGroup-sizing-default" style="font-family: monospace;">Bit Map </span>
                            <input autocomplete="off"
                                id="bitBinMap" type="text" class="form-control" style="letter-spacing: 0.2em;" aria-label="Sizing example input"
                                aria-describedby="inputGroup-sizing-default" placeholder="Enter a 32bit binary value, Little Endian (1 or 0)"
                                value="00000011010111111010010011010001"
                                maxlength="32" minlength="1">
                            <span id="inputBitCount" class="input-group-text border border-3 border-success">32 / 32</span>
                        </div>
                        <div class="input-group mb-3 w-75">
                            <span class="input-group-text" id="inputGroup-sizing-decimal" style="font-family: monospace;">Decimal Value </span>
                            <input autocomplete="off"
                                id="bitDecMap" type="number" class="form-control" style="letter-spacing: 0.2em;" aria-label="Sizing example input"
                                aria-describedby="inputGroup-sizing-default" placeholder="Enter an integer value..."
                                value="56599761"  min="-2147483647" max="2147483649">
                        </div>
                        <div class="table-responsive">
                            <table class="table caption-top text-center" id="createTable">
                                <caption><code id="decimalCreateTabValue"></code></caption>
                                <thead class="sticky-top">
                                    <tr>
                                        <th scope="col" title="From 0 to 31">Bit Position</th>
                                        <th scope="col">Bit Map</th>
                                        <th scope="col">Value</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>0</td>
                                        <td>SCREENED_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>1 - 4</td>
                                        <td>VALIDITY_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>5 - 6</td>
                                        <td>RANGE_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>7</td>
                                        <td>CHANGED_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>8 - 10</td>
                                        <td>REPL_CAUSE_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>11 - 14</td>
                                        <td>REPL_METHOD_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>15 - 21, 23, 25</td>
                                        <td>TEST_FAILED_ID</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>26 - 30</td>
                                        <td>UNUSED</td>
                                        <td></td>
                                    </tr>
                                    <tr>
                                        <td>31</td>
                                        <td>PROTECTION_ID</td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                       <div class="row">
                            <div class="col text-center fw-bold">Bits 22, 24, 26-30 are UNUSED and should be UNSET (0)</div>
                        </div>
                        <div class="accordion mb-3 mt-1" id="RULES">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingOne">
                                    <button class="accordion-button fs-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne"
                                        aria-expanded="true">
                                        <i class="fa-solid fa-scale-balanced me-2"></i> Data Quality Rules
                                    </button>
                                </h2>
                                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                                    data-bs-parent="#RULES">
                                    <div class="accordion-body">
                                        <ol>
                                            <li>Unless the Screened bit is set, no other bits can be set.</li>
                                            <li>Unused bits (22, 24, 27-31, 32+) must be reset (zero).</li>
                                            <li>The Okay, Missing, Questioned and Rejected bits are mutually exclusive.</li>
                                            <li>No replacement cause or replacement method bits can be set unless
                                            the changed (different) bit is also set, and if the changed (different)
                                            bit is set, one of the cause bits and one of the replacement
                                            method bits must be set.</li>
                                            <li>Replacement Cause integer is in range 0..4.</li>
                                            <li>Replacement Method integer is in range 0..4</li>
                                            <li>The Test Failed bits are not mutually exclusive (multiple tests can be
                                            marked as failed).</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingTwo">
                                    <button class="accordion-button fs-3" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo"
                                        aria-expanded="true">
                                        <i class="fa-solid fa-circle-question me-2"></i> Help
                                    </button>
                                </h2>
                                <div id="collapseTwo" class="accordion-collapse collapse show" aria-labelledby="headingTwo"
                                    data-bs-parent="#RULES">
                                    <div class="accordion-body">
                                        <h4>Example:</h4>
                                        Say the decimal quality value is:<br>
                                        <b>56599761</b><br>
                                        That would make the binary equivalent:<br>
                                        <span class="text-center" style="letter-spacing: 0.2em; font-family: monospace;">0000 00<b style="border: 2px solid teal;">1</b><b style="border: 2px solid green;">1 0101</b> 1111 1010 0100 1<b style="border: 2px solid rgb(0, 255, 234);">10</b><b style="border: 2px solid blue;">1 000</b><b style="border: 2px solid red;">1</b><br></span>
                                        <em>Because this is Little Endian bit order, the <b style="color: red;">far right bit</b> is bit index 0.</em>
                                        <h4>Let's walk through from right to left using the diagram below:</h4>
                                        <ul>
                                            <li><a title="Show Me" href="#SCREENED" class="screened px-2 rounded-pill me-1"></a><b>Bit 0 (1)</b>: or the far right bit - is the screened bit. It is 1 in our example so the value is screened.</li>
                                            <li><a title="Show Me" href="#VALID" class="valid px-2 rounded-pill me-1"></a><b>Bit 1-4 (4)</b>: These are our Validity Flag bits. 
                                                <ul>
                                                    <li>Bit 1 set is OKAY</li>
                                                    <li>Bit 2 set is MISSING</li>
                                                    <li>Bit 3 set is QUESTIONABLE</li>
                                                    <li>Bit 4 set is REJECTED</li>
                                                    <li>NO Bits set is UNKNOWN</li>
                                                </ul>
                                                For our example we have <b>1 000</b> for these bits. Meaning it is <b>REJECTED</b>
                                            </li>
                                            <li><a title="Show Me" href="#RANGE" class="range px-2 rounded-pill me-1"></a><b>Bit 5-6 (2)</b>: Value range bits, the bits are 10 for bits 5 and 6. This corresponds to RANGE_2. Where NO_RANGE is 00, RANGE_1 is 01, RANGE_2 is 10, and RANGE_3 is 11</li>
                                            <li><a title="Show Me" href="#CHANGED" class="changed px-2 rounded-pill me-1"></a><b>Bit 7 (1)</b>: Different/changed/modified bit. Set to 1 is MODIFIED, set to 0 is Original. It is set to 1 for our example, and is therefore MODIFIED</li>
                                            <li><a title="Show Me" href="#CAUSE" class="repl-cause px-2 rounded-pill me-1"></a><b>Bit 8-10 (3)</b>: Replacement Cause bits, the replacement cause is one of 5 options. We have 100 for these bits which corresponds to RESTORED</li>
                                            <li><a title="Show Me" href="#METHOD" class="repl-method px-2 rounded-pill me-1"></a><b>Bit 11-14 (4)</b>: Replacement Method bits, these account for the 5 variations you can have. For our case we have </li>
                                            <li><a title="Show Me" href="#TEST" class="test-failed px-2 rounded-pill me-1"></a><b>Bit 15-25 (9)</b>: Test Failed bits, two of these bits are ignored (22/24). Any number of these bits could be set as the test values are <b>NOT</b> mutually exclusive per <a title="Jump to Rule 7" href="#RULES">RULE #7</a></li>
                                            <li><a title="Show Me" href="" class="px-2 rounded-pill me-1"></a><b>Bit 26-30 (5)</b>: Unused Bits/Ignored</li>
                                            <li><a title="Show Me" href="#PROTECTED" class="protected px-2 rounded-pill me-1"></a><b>Bit 31 (1)</b>: Protected Bit - When this bit is set the data is protected and should not be editable by automated processes</li>
                                        </ul>
                                        <hr>
                                        <h4>Bit Mappings :</h4> 
                                        <em>The bit map that corresponds to each flag/value is represented below.</em><br>
                                        <pre>
Little Endian i.e. 31....0

  3                   2                   1                     
<span class="bg-white py-1 rounded-pill fw-light"><span class="protected rounded py-2">1</span> 0 9 8 7 6 <span class="test-failed rounded py-2">5 4 3 2 1 0 9 8 7 6 5</span> <span class="repl-method rounded py-2">4 3 2 1</span> <span class="repl-cause rounded py-2">0 9 8</span> <span class="changed rounded py-2">7</span> <span class="range rounded py-2">6 5</span> <span class="valid rounded py-2">4 3 2 1</span> <span class="screened rounded py-2">0</span></span>
31                                                            0
P - - - - - T T T T T T T T T T T M M M M C C C D R R V V V V S
|           <---------+---------> <--+--> <-+-> | <+> <--+--> |  
|                     |              |      |   |  |     |    +------<span id="SCREENED" class="screened p-1 rounded-pill">Screened T/F </span>
|                     |              |      |   |  |     |
|                     |              |      |   |  |     +---------<span id="VALID" class="valid p-1 rounded-pill">Validity Flags</span>
|                     |              |      |   |  |
|                     |              |      |   |  +-------------<span id="RANGE" class="range p-1 rounded-pill">Value Range Integer</span>
|                     |              |      |   |
|                     |              |      |   +--------------<span id="CHANGED" class="changed p-1 rounded-pill">Different T/F</span>
|                     |              |      | 
|                     |              |      +----------------<span id="CAUSE" class="repl-cause p-1 rounded-pill">Replacement Cause Integer</span>
|                     |              |
|                     |              +---------------------<span id="METHOD" class="repl-method p-1 rounded-pill">Replacement Method Integer</span>
|                     |
|                     +----------------------------------<span id="TEST" class="test-failed p-1 rounded-pill">Test Failed Flags</span>
|
+------------------------------------------------------<span id="PROTECTED" class="protected p-1 rounded-pill">Protected T/F</span>
                                        </pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </main>
    </body>

</html>